var U=Object.defineProperty,Y=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var B=(t,r,s)=>r in t?U(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,D=(t,r)=>{for(var s in r||(r={}))X.call(r,s)&&B(t,s,r[s]);if(H)for(var s of H(r))Z.call(r,s)&&B(t,s,r[s]);return t},V=(t,r)=>Y(t,Q(r));import{r as e,R as y,C as x,B as ee,c as M,T as te,a as L,b as R,d as re,N as E,e as se,f as ne,g,h as z,L as A,i as ae}from"./vendor.3585f8f4.js";const oe=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}};oe();function O(){return window.location.host}var u;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.OPEN=1]="OPEN",t[t.CLOSING=2]="CLOSING",t[t.CLOSED=3]="CLOSED"})(u||(u={}));function le({onConnect:t}){const r=e.exports.useMemo(O,[]),[s,a]=e.exports.useState(!0),[n,o]=e.exports.useState([]),[i,m]=e.exports.useState([]),h=e.exports.useCallback(()=>new WebSocket(`ws://${r}/inspect/`),[r]),[l,_]=e.exports.useState(()=>h()),[d,c]=e.exports.useState(l.readyState);return e.exports.useEffect(()=>{c(l.readyState);const p=()=>{c(l.readyState),_(h())},v=()=>{t(),a(!1),c(l.readyState)},I=({data:W})=>{const{type:K,payload:C}=JSON.parse(W);switch(K){case"historic":if(s){const b=C.filter(({type:f})=>f==="request"),J=C.filter(({type:f})=>f==="response");o(f=>[...f,...b.map(({payload:k})=>k)]),m(f=>[...f,...J.map(({payload:k})=>k)])}break;case"request":o(b=>[...b,C]);break;case"response":m(b=>[...b,C]);break}};return l.addEventListener("message",I),l.addEventListener("close",p),l.addEventListener("open",v),()=>{l.removeEventListener("message",I),l.removeEventListener("close",p),l.removeEventListener("open",v)}},[l]),{calls:e.exports.useMemo(()=>n.map(p=>({request:p,response:i.find(({id:v})=>v===p.id)})),[n,i]),readyState:d,clear:()=>{o([]),m([])}}}const ce="_app_1d8wv_1",ie="_main_1d8wv_9",me="_sidebar_1d8wv_16",pe="_details_1d8wv_22",ue="_noRequest_1d8wv_28",de="_noRequestSelected_1d8wv_28";var N={app:ce,main:ie,sidebar:me,details:pe,noRequest:ue,noRequestSelected:de};const xe="_details_izyhm_1",Ee="_header_izyhm_9",he="_content_izyhm_14";var S={details:xe,header:Ee,content:he};function w(t,r,s){return t>=r&&t<=s}function fe(t){if(t===void 0)return"secondary";if(w(t,100,199))return"info";if(w(t,200,299))return"success";if(w(t,300,399))return"primary";if(w(t,400,499))return"danger";if(w(t,500,599))return"warning"}function G({requestResponse:{request:t,response:r},selected:s=!1}){var a;return e.exports.createElement(y,null,e.exports.createElement(x,{className:"flex-grow-0 d-flex align-items-center"},t.method),e.exports.createElement(x,{className:"flex-grow-1"},t.path),e.exports.createElement(x,{className:"flex-grow-0 d-flex align-items-center"},e.exports.createElement(ee,{className:M({border:s}),bg:fe(r==null?void 0:r.status)},(a=r==null?void 0:r.status)!=null?a:"Loading...")))}const ve="_content_1sg4q_1",ge="_body_1sg4q_9",Ne="_renderError_1sg4q_15";var $={content:ve,body:ge,renderError:Ne};const q=e.exports.createContext({});function be({children:t}){const r=e.exports.useMemo(()=>new te,[]),[s,a]=e.exports.useState(()=>r.getTheme()==="dark");return e.exports.useEffect(()=>{r.setTheme(s?"dark":"light")},[s]),e.exports.createElement(q.Provider,{value:{darkMode:s,toggle:()=>a(n=>!n)}},t)}function T(t,r,s){console.log(t,r);try{const[a,n]=Object.entries(t).find(([o])=>o.toLowerCase()===r.toLowerCase());return s!==void 0?`${n}${s}`:n}catch{return null}}function P({raw:t,setRaw:r,data:s}){return e.exports.createElement("div",{className:$.content},e.exports.createElement(L,{fluid:!0,className:"border-bottom"},e.exports.createElement(y,{className:"py-3"},e.exports.createElement(x,{className:"form-check form-switch ms-3"},e.exports.createElement("input",{className:"form-check-input",id:"raw",type:"checkbox",checked:t,role:"switch",onChange:()=>r(!t)}),e.exports.createElement("label",{htmlFor:"raw",className:"form-check-label"},"Raw")),e.exports.createElement(x,{xs:"auto"},[T(s.headers,"content-length","bytes"),T(s.headers,"content-type")].filter(a=>a!==null).join("; ")))),e.exports.createElement(y,{className:$.body},(()=>{try{return ye({data:s,raw:t})}catch{return e.exports.createElement("div",{className:$.renderError},e.exports.createElement("p",null,"Body could not be rendered"),e.exports.createElement(R,{variant:"link",onClick:()=>r(!0)},"View raw"))}})()))}function ye({data:t,raw:r=!1}){const{darkMode:s}=e.exports.useContext(q),a=e.exports.useMemo(()=>r?"":T(t.headers,"content-type").toLowerCase().split(";")[0],[t,r]);if(r)return e.exports.createElement("pre",{className:"mb-0"},e.exports.createElement("code",null,atob(t.body)));if(["application/pdf","text/html"].includes(a))return e.exports.createElement("iframe",{className:"bg-white",src:`data:${a};base64,${t.body}`,srcDoc:a==="text/html"?atob(t.body):void 0,loading:"lazy",sandbox:""});if(a.startsWith("application/json"))return e.exports.createElement(re,{src:JSON.parse(atob(t.body)),theme:s?"monokai":void 0,style:{padding:"1em",width:"100%",height:"100%",overflowY:"auto"}});if(a.startsWith("audio"))return e.exports.createElement("audio",{src:`data:${a};base64,${t.body}`});if(a.startsWith("video"))return e.exports.createElement("video",{src:`data:${a};base64,${t.body}`});if(a.startsWith("image"))return e.exports.createElement("img",{src:`data:${a};base64,${t.body}`,alt:""});throw new Error("Not Rendered")}function we({timing:t}){const r=e.exports.useMemo(()=>Math.round(t*1e3)/1e3,[t]),s=e.exports.useMemo(()=>r>1,[r]);return Number.isNaN(r)?null:e.exports.createElement(e.exports.Fragment,null,`${s?r:r*1e3}${s?"s":"ms"}`)}function F({title:t,headers:r}){return e.exports.createElement(se,{className:"m-3"},e.exports.createElement(ne,{striped:!0,responsive:!0,borderless:!0,hover:!0,className:"mb-0"},e.exports.createElement("thead",null,e.exports.createElement("tr",null,e.exports.createElement("th",{colSpan:2,className:"bg-dark text-white rounded-top"},t))),e.exports.createElement("tbody",null,Object.entries(r).map(([s,a])=>e.exports.createElement("tr",null,e.exports.createElement("td",null,s),e.exports.createElement("td",null,a))))))}function Ce({requestResponse:t}){var i,m;const[r,s]=e.exports.useState("headers"),[a,n]=e.exports.useState(!1),o=e.exports.useCallback(async()=>fetch(`http://${O()}/resend/`,{method:"POST",body:JSON.stringify(V(D({},t.request),{id:void 0}))}),[t]);return e.exports.createElement("div",{className:S.details},e.exports.createElement("div",{className:S.header},e.exports.createElement(y,null,e.exports.createElement(x,null,e.exports.createElement(L,{fluid:!0,style:{fontSize:"1.5em"},className:"py-3"},e.exports.createElement(G,{requestResponse:t,className:S.summary})))),e.exports.createElement(y,{className:"gx-0 d-flex"},e.exports.createElement(x,null,e.exports.createElement(E,{variant:"tabs",activeKey:r,onSelect:h=>s(h)},e.exports.createElement(E.Item,null,e.exports.createElement(E.Link,{eventKey:"headers"},"Headers")),e.exports.createElement(E.Item,null,e.exports.createElement(E.Link,{eventKey:"request"},"Request")),e.exports.createElement(E.Item,null,e.exports.createElement(E.Link,{eventKey:"response",disabled:t.response===void 0},"Response")))),e.exports.createElement(x,{className:"border-bottom px-3 ",xs:"auto"},e.exports.createElement(we,{timing:(m=(i=t.response)==null?void 0:i.timing)!=null?m:NaN}),e.exports.createElement(R,{variant:"outline-primary",onClick:()=>o(),className:"ms-3"},"Resend")))),e.exports.createElement("div",{className:S.content},r==="headers"&&e.exports.createElement(e.exports.Fragment,null,e.exports.createElement(F,{title:"request headers",headers:t.request.headers}),t.response&&e.exports.createElement(F,{title:"response headers",headers:t.response.headers})),r==="request"&&e.exports.createElement(P,{data:t.request,raw:a,setRaw:n}),r==="response"&&t.response!==void 0&&e.exports.createElement(P,{data:t.response,raw:a,setRaw:n})))}function Se(){return e.exports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-sliders",viewBox:"0 0 16 16"},e.exports.createElement("path",{"fill-rule":"evenodd",d:"M11.5 2a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM9.05 3a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0V3h9.05zM4.5 7a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM2.05 8a2.5 2.5 0 0 1 4.9 0H16v1H6.95a2.5 2.5 0 0 1-4.9 0H0V8h2.05zm9.45 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm-2.45 1a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0v-1h9.05z"}))}function _e(){return e.exports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-sun",viewBox:"0 0 16 16"},e.exports.createElement("path",{d:"M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"}))}function ke(){return e.exports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-moon",viewBox:"0 0 16 16"},e.exports.createElement("path",{d:"M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278zM4.858 1.311A7.269 7.269 0 0 0 1.025 7.71c0 4.02 3.279 7.276 7.319 7.276a7.316 7.316 0 0 0 5.205-2.162c-.337.042-.68.063-1.029.063-4.61 0-8.343-3.714-8.343-8.29 0-1.167.242-2.278.681-3.286z"}))}function Me(){return e.exports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-trash",viewBox:"0 0 16 16"},e.exports.createElement("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),e.exports.createElement("path",{"fill-rule":"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"}))}const j={[u.CONNECTING]:"\u{1F534}",[u.OPEN]:"\u{1F7E2}",[u.CLOSING]:"\u{1F534}",[u.CLOSED]:"\u{1F534}"},Le={[u.CONNECTING]:"Connecting...",[u.OPEN]:"Connected",[u.CLOSING]:"Closing...",[u.CLOSED]:"Closed"};function ze(){const{darkMode:t,toggle:r}=e.exports.useContext(q),[s,a]=e.exports.useState(null),{calls:n,readyState:o,clear:i}=le({onConnect:async()=>{const c=await(await fetch(`http://${O()}/config/`)).json();a(c)}});e.exports.useEffect(()=>{var c;const d=new URL((c=s==null?void 0:s.url)!=null?c:"https://loading...");document.title=`${j[o]} ${d.host} | TTUN`},[o,s==null?void 0:s.url]);const[m,h]=e.exports.useState(null),l=e.exports.useMemo(()=>m===null?null:n[m],[m,n]),_=[{onClick:r,icon:t?e.exports.createElement(_e,null):e.exports.createElement(ke,null),label:t?"Light mode":"Dark mode"},null,{onClick:()=>{h(null),i()},icon:e.exports.createElement(Me,null),label:"Clear"}];return s&&e.exports.createElement("div",{className:N.app},e.exports.createElement(g,{bg:"dark",variant:"dark",expand:!0,as:"header"},e.exports.createElement(L,{fluid:!0},e.exports.createElement("div",null,e.exports.createElement(g.Brand,null,"TTUN"),e.exports.createElement(g.Text,null,`${j[o]} ${Le[o]}`)),e.exports.createElement("div",{className:"d-flex"},e.exports.createElement(g.Text,null,e.exports.createElement("a",{href:s.url,target:"_blank"},s.url)),e.exports.createElement(g.Toggle,{"aria-controls":"settings"}),e.exports.createElement(g.Collapse,{id:"settings",className:"ms-2"},e.exports.createElement(E,null,e.exports.createElement(z,{align:"end",title:e.exports.createElement(Se,null)},_.map(d=>{if(d!==null){const{onClick:c,icon:p,label:v}=d;return e.exports.createElement(z.Item,{onClick:c,className:"d-flex align-items-center"},p,e.exports.createElement("span",{className:"ms-3"},v))}else return e.exports.createElement(z.Divider,null)}))))))),e.exports.createElement("main",{className:N.main},e.exports.createElement(A,{variant:"flush",as:"ul",className:M("border-end",N.sidebar)},n.length>0?n.slice(0).reverse().map((d,c)=>{const p=m===n.length-c-1;return e.exports.createElement(A.Item,{as:"li",onClick:()=>h(n.length-c-1),key:`request-${c}`,className:M({"bg-primary":p,"text-light":p,"border-bottom":!0})},e.exports.createElement(G,{requestResponse:d,selected:p}))}):e.exports.createElement("div",{className:N.noRequest},e.exports.createElement("p",null,"No requests"))),e.exports.createElement("div",{className:N.details},l!==null?e.exports.createElement(Ce,{requestResponse:l}):e.exports.createElement("div",{className:N.noRequestSelected},e.exports.createElement("p",null,"Select a request to inspect it")))))}ae.exports.render(e.exports.createElement(be,null,e.exports.createElement(ze,null)),document.getElementById("root"));
