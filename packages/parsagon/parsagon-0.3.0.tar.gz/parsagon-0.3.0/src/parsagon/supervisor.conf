[program:daphne]
command=bash -c "/home/ubuntu/parsagon/server/daphne.sh"
directory=/home/ubuntu/parsagon/server/
autostart=false
autorestart=true
stopasgroup=true
user=ubuntu
stdout_logfile=/var/log/supervisor/daphne-stdout.log
stderr_logfile=/var/log/supervisor/daphne-stderr.log
startsecs=10

[program:celery]
command=bash -c "/home/ubuntu/parsagon/server/celery.sh"
directory=/home/ubuntu/parsagon/server/
autostart=false
autorestart=true
user=ubuntu
stdout_logfile=/var/log/supervisor/celery-stdout.log
stderr_logfile=/var/log/supervisor/celery-stderr.log
startsecs=10
; Need to wait for currently executing tasks to finish at shutdown.
; Increase this if you have very long running tasks.
stopwaitsecs = 600
; When resorting to send SIGKILL to the program to terminate it
; send SIGKILL to its whole process group instead,
; taking care of its children as well.
killasgroup=true
; Set Celery priority higher than default (999)
; so, if broker is supervised, it will start first.
priority=1000
