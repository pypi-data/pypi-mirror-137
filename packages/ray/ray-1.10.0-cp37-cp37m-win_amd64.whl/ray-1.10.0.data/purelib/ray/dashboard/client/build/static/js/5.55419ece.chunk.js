(this["webpackJsonpray-dashboard-client"]=this["webpackJsonpray-dashboard-client"]||[]).push([[5],{498:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return j}));var a=n(409),c=n(476),r=n(482),i=n(470),o=n(483),s=(n(0),n(1)),l=Object(a.a)((function(e){return{search:{margin:e.spacing(1),marginTop:0}}})),d=function(e){var t=e.label,n=e.onChange,a=e.defaultValue,i=l();return Object(s.jsx)(c.a,{className:i.search,size:"small",label:t,InputProps:{onChange:function(e){var t=e.target.value;n&&n(t)},defaultValue:a,endAdornment:Object(s.jsx)(r.a,{position:"end",children:Object(s.jsx)(o.a,{})})}})},j=function(e){var t=e.label,n=e.onChange,a=e.options,r=l();return Object(s.jsxs)(c.a,{className:r.search,size:"small",label:t,select:!0,SelectProps:{onChange:function(e){var t=e.target.value;n&&n(t)},style:{width:100}},children:[Object(s.jsx)(i.a,{value:"",children:"All"}),a.map((function(e){return"string"===typeof e?Object(s.jsx)(i.a,{value:e,children:e}):Object(s.jsx)(i.a,{value:e[0],children:e[1]})}))]})}},499:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){return e<1024?"".concat(e,"KB"):e<Math.pow(1024,2)?"".concat((e/Math.pow(1024,1)).toFixed(2),"KB"):e<Math.pow(1024,3)?"".concat((e/Math.pow(1024,2)).toFixed(2),"MB"):e<Math.pow(1024,4)?"".concat((e/Math.pow(1024,3)).toFixed(2),"GB"):e<Math.pow(1024,5)?"".concat((e/Math.pow(1024,4)).toFixed(2),"TB"):e<Math.pow(1024,6)?"".concat((e/Math.pow(1024,5)).toFixed(2),"TB"):""}},500:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(461),c=(n(0),n(1)),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:28;return Object(c.jsx)(a.a,{title:e,interactive:!0,children:Object(c.jsx)("span",{children:e.length>t?e.slice(0,t)+"...":e})})}},501:function(e,t,n){"use strict";var a=n(10),c=n(7),r=n(476),i=n(482),o=n(466),s=n(464),l=n(465),d=n(463),j=n(467),u=n(89),b=n(483),h=n(491),O=n(488),p=n(0),x=n.n(p),f=n(64),m=n(73),g=n(500),v=n(102),w=n(503),y=n(100),C=n(505),I=n(1);t.a=function(e){var t=e.actors,n=void 0===t?{}:t,k=e.workers,M=void 0===k?[]:k,A=Object(p.useState)(1),S=Object(c.a)(A,2),F=S[0],N=S[1],P=Object(v.a)(),D=P.changeFilter,T=P.filterFunc,z=Object(p.useState)(10),L=Object(c.a)(z,2),R=L[0],B=L[1],W=Object(p.useContext)(m.a).ipLogMap,E=Object.values(n||{}).map((function(e){var t,n,c,r;return Object(a.a)(Object(a.a)({},e),{},{functionDesc:Object.values((null===(t=e.taskSpec)||void 0===t||null===(n=t.functionDescriptor)||void 0===n?void 0:n.javaFunctionDescriptor)||(null===(c=e.taskSpec)||void 0===c||null===(r=c.functionDescriptor)||void 0===r?void 0:r.pythonFunctionDescriptor)||{}).join(" ")})})).filter(T),H=E.slice((F-1)*R,F*R);return Object(I.jsxs)(x.a.Fragment,{children:[Object(I.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:[Object(I.jsx)(h.a,{style:{margin:8,width:120},options:Array.from(new Set(Object.values(n).map((function(e){return e.state})))),onInputChange:function(e,t){D("state",t.trim())},renderInput:function(e){return Object(I.jsx)(r.a,Object(a.a)(Object(a.a)({},e),{},{label:"State"}))}}),Object(I.jsx)(h.a,{style:{margin:8,width:150},options:Array.from(new Set(Object.values(n).map((function(e){var t;return null===(t=e.address)||void 0===t?void 0:t.ipAddress})))),onInputChange:function(e,t){D("address.ipAddress",t.trim())},renderInput:function(e){return Object(I.jsx)(r.a,Object(a.a)(Object(a.a)({},e),{},{label:"IP"}))}}),Object(I.jsx)(r.a,{style:{margin:8,width:120},label:"PID",size:"small",InputProps:{onChange:function(e){var t=e.target.value;D("pid",t.trim())},endAdornment:Object(I.jsx)(i.a,{position:"end",children:Object(I.jsx)(b.a,{})})}}),Object(I.jsx)(r.a,{style:{margin:8,width:200},label:"Task Func Desc",size:"small",InputProps:{onChange:function(e){var t=e.target.value;D("functionDesc",t.trim())},endAdornment:Object(I.jsx)(i.a,{position:"end",children:Object(I.jsx)(b.a,{})})}}),Object(I.jsx)(r.a,{style:{margin:8,width:120},label:"Name",size:"small",InputProps:{onChange:function(e){var t=e.target.value;D("name",t.trim())},endAdornment:Object(I.jsx)(i.a,{position:"end",children:Object(I.jsx)(b.a,{})})}}),Object(I.jsx)(r.a,{style:{margin:8,width:120},label:"Actor ID",size:"small",InputProps:{onChange:function(e){var t=e.target.value;D("actorId",t.trim())},endAdornment:Object(I.jsx)(i.a,{position:"end",children:Object(I.jsx)(b.a,{})})}}),Object(I.jsx)(r.a,{style:{margin:8,width:120},label:"Page Size",size:"small",InputProps:{onChange:function(e){var t=e.target.value;B(Math.min(Number(t),500)||10)}}})]}),Object(I.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(I.jsx)("div",{children:Object(I.jsx)(O.a,{page:F,onChange:function(e,t){return N(t)},count:Math.ceil(E.length/R)})}),Object(I.jsx)("div",{children:Object(I.jsx)(w.a,{type:"actor",list:E})})]}),Object(I.jsxs)(o.a,{children:[Object(I.jsx)(s.a,{children:Object(I.jsx)(l.a,{children:["","ID(Num Restarts)","Name","Task Func Desc","Job Id","Pid","IP","Port","State","Log"].map((function(e){return Object(I.jsx)(d.a,{align:"center",children:e},e)}))})}),Object(I.jsx)(j.a,{children:H.map((function(e){var t=e.actorId,n=e.functionDesc,a=e.jobId,c=e.pid,r=e.address,i=e.state,o=e.name,s=e.numRestarts;return Object(I.jsxs)(C.a,{length:M.filter((function(e){return e.pid===c&&r.ipAddress===e.coreWorkerStats[0].ipAddress})).length,expandComponent:Object(I.jsx)(C.b,{actorMap:{},workers:M.filter((function(e){return e.pid===c&&r.ipAddress===e.coreWorkerStats[0].ipAddress})),mini:!0}),children:[Object(I.jsxs)(d.a,{align:"center",style:{color:Number(s)>0?u.a[500]:"inherit"},children:[t,"(",s,")"]}),Object(I.jsx)(d.a,{align:"center",children:o}),Object(I.jsx)(d.a,{align:"center",children:Object(g.a)(n,60)}),Object(I.jsx)(d.a,{align:"center",children:a}),Object(I.jsx)(d.a,{align:"center",children:c}),Object(I.jsx)(d.a,{align:"center",children:null===r||void 0===r?void 0:r.ipAddress}),Object(I.jsx)(d.a,{align:"center",children:null===r||void 0===r?void 0:r.port}),Object(I.jsx)(d.a,{align:"center",children:Object(I.jsx)(y.a,{type:"actor",status:i})}),Object(I.jsx)(d.a,{align:"center",children:W[null===r||void 0===r?void 0:r.ipAddress]&&Object(I.jsx)(f.b,{target:"_blank",to:"/log/".concat(encodeURIComponent(W[null===r||void 0===r?void 0:r.ipAddress]),"?fileName=").concat(a,"-").concat(c),children:"Log"})})]},t)}))})]})]})}},502:function(e,t,n){"use strict";var a=n(409),c=(n(0),n(1)),r=Object(a.a)((function(e){return{container:{background:"linear-gradient(45deg, #21CBF3ee 30%, #2196F3ee 90%)",border:"1px solid #ffffffbb",padding:"0 12px",height:18,lineHeight:"18px",position:"relative",boxSizing:"content-box",borderRadius:4},displayBar:{background:e.palette.background.paper,position:"absolute",right:0,height:18,transition:"0.5s width",borderRadius:2,borderTopLeftRadius:0,borderBottomLeftRadius:0,border:"2px solid transparent",boxSizing:"border-box"},text:{fontSize:12,zIndex:2,position:"relative",color:e.palette.text.primary,width:"100%",textAlign:"center"}}}));t.a=function(e){var t=e.num,n=e.total,a=r(),i=Math.round(t/n*100);return Object(c.jsxs)("div",{className:a.container,children:[Object(c.jsx)("div",{className:a.displayBar,style:{width:"".concat(Math.min(Math.max(0,100-i),100),"%")}}),Object(c.jsx)("div",{className:a.text,children:e.children})]})}},503:function(e,t,n){"use strict";var a=n(7),c=n(460),r=(n(0),n(100)),i=n(1);t.a=function(e){var t=e.type,n=e.list,o={};return n.forEach((function(e){var t=e.state;o[t]=o[t]+1||1})),Object(i.jsxs)(c.a,{container:!0,spacing:2,alignItems:"center",children:[Object(i.jsx)(c.a,{item:!0,children:Object(i.jsx)(r.a,{status:"TOTAL",type:t,suffix:"x ".concat(n.length)})}),Object.entries(o).map((function(e){var n=Object(a.a)(e,2),o=n[0],s=n[1];return Object(i.jsx)(c.a,{item:!0,children:Object(i.jsx)(r.a,{status:o,type:t,suffix:" x ".concat(s)})})}))]})}},505:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var a=n(10),c=n(7),r=n(3),i=n(465),o=n(463),s=n(413),l=n(506),d=n(471),j=n(466),u=n(464),b=n(467),h=n(460),O=n(0),p=n.n(O),x=n(29),f=Object(x.a)(O.createElement("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown"),m=Object(x.a)(O.createElement("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight"),g=n(59),v=n.n(g),w=n(64),y=n(73),C=n(499),I=n(500),k=n(102),M=n(501),A=n(502),S=n(498),F=n(1),N=["children","expandComponent","length","stateKey"],P=function(e){var t=e.children,n=e.expandComponent,l=e.length,d=e.stateKey,j=void 0===d?"":d,u=Object(r.a)(e,N),b=p.a.useState(!1),h=Object(c.a)(b,2),x=h[0],g=h[1];return Object(O.useEffect)((function(){j.startsWith("ON")?g(!0):j.startsWith("OFF")&&g(!1)}),[j]),l<1?Object(F.jsxs)(i.a,Object(a.a)(Object(a.a)({},u),{},{children:[Object(F.jsx)(o.a,{padding:"checkbox"}),t]})):Object(F.jsxs)(p.a.Fragment,{children:[Object(F.jsxs)(i.a,Object(a.a)(Object(a.a)({},u),{},{children:[Object(F.jsx)(o.a,{padding:"checkbox",children:Object(F.jsxs)(s.a,{style:{color:"inherit"},onClick:function(){return g(!x)},children:[l,x?Object(F.jsx)(f,{}):Object(F.jsx)(m,{})]})}),t]})),x&&Object(F.jsx)(i.a,{children:Object(F.jsx)(o.a,{colSpan:24,children:n})})]})},D=function(e){var t=e.actorMap,n=e.coreWorkerStats,a={};return(n||[]).filter((function(e){return t[e.actorId]})).forEach((function(e){return a[e.actorId]=t[e.actorId]})),Object.values(a).length?Object(F.jsx)(l.a,{children:Object(F.jsx)(M.a,{actors:a})}):Object(F.jsx)("p",{children:"The Worker Haven't Had Related Actor Yet."})};t.b=function(e){var t=e.workers,n=void 0===t?[]:t,a=e.actorMap,r=e.mini,s=Object(k.a)(),l=s.changeFilter,x=s.filterFunc,f=Object(O.useState)(""),m=Object(c.a)(f,2),g=m[0],M=m[1],N=Object(O.useContext)(y.a),T=N.nodeMap,z=N.ipLogMap;return Object(F.jsxs)(p.a.Fragment,{children:[!r&&Object(F.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(F.jsx)(S.a,{label:"Pid",onChange:function(e){return l("pid",e)}}),Object(F.jsx)(d.a,{onClick:function(){return M("ON".concat(Math.random()))},children:"Expand All"}),Object(F.jsx)(d.a,{onClick:function(){return M("OFF".concat(Math.random()))},children:"Collapse All"})]})," ",Object(F.jsxs)(j.a,{children:[Object(F.jsx)(u.a,{children:Object(F.jsx)(i.a,{children:["","Pid","CPU","CPU Times","Memory","CMD Line","Create Time","Log","Ops","IP/Hostname"].map((function(e){return Object(F.jsx)(o.a,{align:"center",children:e},e)}))})}),Object(F.jsx)(b.a,{children:n.filter(x).sort((function(e,t){var n=(e.coreWorkerStats||[]).filter((function(e){return a[e.actorId]})).length||0;return((t.coreWorkerStats||[]).filter((function(e){return a[e.actorId]})).length||0)-n})).map((function(e){var t=e.pid,n=e.cpuPercent,r=e.cpuTimes,i=e.memoryInfo,s=e.cmdline,l=e.createTime,j=e.coreWorkerStats,u=void 0===j?[]:j,b=e.language,O=e.ip,p=e.hostname;return Object(F.jsxs)(P,{expandComponent:Object(F.jsx)(D,{actorMap:a,coreWorkerStats:u}),length:(u||[]).filter((function(e){return a[e.actorId]})).length,stateKey:g,children:[Object(F.jsx)(o.a,{align:"center",children:t}),Object(F.jsx)(o.a,{align:"center",children:Object(F.jsxs)(A.a,{num:Number(n),total:100,children:[n,"%"]})}),Object(F.jsx)(o.a,{align:"center",children:Object(F.jsx)("div",{style:{maxHeight:55,overflow:"auto"},children:Object.entries(r||{}).map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(F.jsxs)("div",{style:{margin:4},children:[n,":",a]})}))})}),Object(F.jsx)(o.a,{align:"center",children:Object(F.jsx)("div",{style:{maxHeight:55,overflow:"auto"},children:Object.entries(i||{}).map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(F.jsxs)("div",{style:{margin:4},children:[n,":",Object(C.a)(a)]})}))})}),Object(F.jsx)(o.a,{align:"center",style:{lineBreak:"anywhere"},children:s&&Object(I.a)(s.filter((function(e){return e})).join(" "))}),Object(F.jsx)(o.a,{align:"center",children:v()(1e3*l).format("YYYY/MM/DD HH:mm:ss")}),Object(F.jsx)(o.a,{align:"center",children:Object(F.jsx)(h.a,{container:!0,spacing:2,children:z[O]&&Object(F.jsx)(h.a,{item:!0,children:Object(F.jsx)(w.b,{target:"_blank",to:"/log/".concat(encodeURIComponent(z[O]),"?fileName=").concat(u[0].jobId||"","-").concat(t),children:"Log"})})})}),Object(F.jsx)(o.a,{align:"center",children:"JAVA"===b&&Object(F.jsxs)("div",{children:[Object(F.jsx)(d.a,{onClick:function(){var e;window.open("#/cmd/jstack/".concat(null===(e=u[0])||void 0===e?void 0:e.ipAddress,"/").concat(t))},children:"jstack"})," ",Object(F.jsx)(d.a,{onClick:function(){var e;window.open("#/cmd/jmap/".concat(null===(e=u[0])||void 0===e?void 0:e.ipAddress,"/").concat(t))},children:"jmap"}),Object(F.jsx)(d.a,{onClick:function(){var e;window.open("#/cmd/jstat/".concat(null===(e=u[0])||void 0===e?void 0:e.ipAddress,"/").concat(t))},children:"jstat"})]})}),Object(F.jsxs)(o.a,{align:"center",children:[O,Object(F.jsx)("br",{}),T[p]?Object(F.jsx)(w.b,{target:"_blank",to:"/node/".concat(T[p]),children:p}):p]})]},t)}))})]})]})}},506:function(e,t,n){"use strict";var a=n(2),c=n(3),r=n(0),i=n(4),o=n(5),s=r.forwardRef((function(e,t){var n=e.classes,o=e.className,s=e.component,l=void 0===s?"div":s,d=Object(c.a)(e,["classes","className","component"]);return r.createElement(l,Object(a.a)({ref:t,className:Object(i.a)(n.root,o)},d))}));t.a=Object(o.a)({root:{width:"100%",overflowX:"auto"}},{name:"MuiTableContainer"})(s)},516:function(e,t,n){"use strict";n.r(t);var a=n(7),c=n(409),r=n(0),i=n(501),o=n(101),s=n(62),l=n(1),d=Object(c.a)((function(e){return{root:{padding:e.spacing(2),width:"100%"}}}));t.default=function(){var e=d(),t=Object(r.useState)({}),n=Object(a.a)(t,2),c=n[0],j=n[1];return Object(r.useEffect)((function(){Object(s.b)("logical/actors").then((function(e){var t,n;null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.actors&&j(e.data.data.actors)}))}),[]),Object(l.jsx)("div",{className:e.root,children:Object(l.jsx)(o.a,{title:"ACTORS",children:Object(l.jsx)(i.a,{actors:c})})})}}}]);
//# sourceMappingURL=5.55419ece.chunk.js.map