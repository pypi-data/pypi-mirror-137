(this["webpackJsonpray-dashboard-client"]=this["webpackJsonpray-dashboard-client"]||[]).push([[7],{498:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u}));var n=a(409),r=a(476),c=a(482),i=a(470),o=a(483),s=(a(0),a(1)),l=Object(n.a)((function(e){return{search:{margin:e.spacing(1),marginTop:0}}})),d=function(e){var t=e.label,a=e.onChange,n=e.defaultValue,i=l();return Object(s.jsx)(r.a,{className:i.search,size:"small",label:t,InputProps:{onChange:function(e){var t=e.target.value;a&&a(t)},defaultValue:n,endAdornment:Object(s.jsx)(c.a,{position:"end",children:Object(s.jsx)(o.a,{})})}})},u=function(e){var t=e.label,a=e.onChange,n=e.options,c=l();return Object(s.jsxs)(r.a,{className:c.search,size:"small",label:t,select:!0,SelectProps:{onChange:function(e){var t=e.target.value;a&&a(t)},style:{width:100}},children:[Object(s.jsx)(i.a,{value:"",children:"All"}),n.map((function(e){return"string"===typeof e?Object(s.jsx)(i.a,{value:e,children:e}):Object(s.jsx)(i.a,{value:e[0],children:e[1]})}))]})}},504:function(e,t,a){"use strict";var n=a(421),r=a(468),c=(a(0),a(1));t.a=function(e){var t=e.loading;return Object(c.jsx)(n.a,{open:t,style:{zIndex:100},children:Object(c.jsx)(r.a,{color:"primary"})})}},506:function(e,t,a){"use strict";var n=a(2),r=a(3),c=a(0),i=a(4),o=a(5),s=c.forwardRef((function(e,t){var a=e.classes,o=e.className,s=e.component,l=void 0===s?"div":s,d=Object(r.a)(e,["classes","className","component"]);return c.createElement(l,Object(n.a)({ref:t,className:Object(i.a)(a.root,o)},d))}));t.a=Object(o.a)({root:{width:"100%",overflowX:"auto"}},{name:"MuiTableContainer"})(s)},507:function(e,t,a){"use strict";var n=a(2),r=a(3),c=a(0),i=a(4),o=a(5),s=a(11),l=a(8),d=a(103),u=c.forwardRef((function(e,t){var a=e.classes,o=e.className,s=e.color,u=void 0===s?"secondary":s,b=e.edge,h=void 0!==b&&b,p=e.size,j=void 0===p?"medium":p,g=Object(r.a)(e,["classes","className","color","edge","size"]),m=c.createElement("span",{className:a.thumb});return c.createElement("span",{className:Object(i.a)(a.root,o,{start:a.edgeStart,end:a.edgeEnd}[h],"small"===j&&a["size".concat(Object(l.a)(j))])},c.createElement(d.a,Object(n.a)({type:"checkbox",icon:m,checkedIcon:m,classes:{root:Object(i.a)(a.switchBase,a["color".concat(Object(l.a)(u))]),input:a.input,checked:a.checked,disabled:a.disabled},ref:t},g)),c.createElement("span",{className:a.track}))}));t.a=Object(o.a)((function(e){return{root:{display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},edgeStart:{marginLeft:-8},edgeEnd:{marginRight:-8},switchBase:{position:"absolute",top:0,left:0,zIndex:1,color:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[400],transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),"&$checked":{transform:"translateX(20px)"},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{opacity:.5},"&$disabled + $track":{opacity:"light"===e.palette.type?.12:.1}},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(s.c)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.primary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(s.c)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.secondary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},sizeSmall:{width:40,height:24,padding:7,"& $thumb":{width:16,height:16},"& $switchBase":{padding:4,"&$checked":{transform:"translateX(16px)"}}},checked:{},disabled:{},input:{left:"-100%",width:"300%"},thumb:{boxShadow:e.shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"},track:{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white,opacity:"light"===e.palette.type?.38:.3}}}),{name:"MuiSwitch"})(u)},508:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return c}));var n=a(62),r=function(){return Object(n.b)("jobs?view=summary")},c=function(e){return Object(n.b)("jobs/".concat(e))}},519:function(e,t,a){"use strict";a.r(t);var n=a(507),r=a(506),c=a(466),i=a(464),o=a(465),s=a(463),l=a(467),d=a(409),u=a(488),b=a(59),h=a.n(b),p=a(0),j=a(64),g=a(504),m=a(498),f=a(101),O=a(9),v=a(10),x=a(19),y=a(21),k=a(7),w=a(15),S=a.n(w),C=a(508),$=a(1),N=Object(d.a)((function(e){return{root:{padding:e.spacing(2),width:"100%"}}})),z=["ID","DriverIpAddress","DriverPid","IsDead","StartTime","EndTime"];t.default=function(){var e=N(),t=function(){var e=Object(p.useState)([]),t=Object(k.a)(e,2),a=t[0],n=t[1],r=Object(p.useState)({pageSize:10,pageNo:1}),c=Object(k.a)(r,2),i=c[0],o=c[1],s=Object(p.useState)("Loading the job list..."),l=Object(k.a)(s,2),d=l[0],u=l[1],b=Object(p.useState)(!0),h=Object(k.a)(b,2),j=h[0],g=h[1],m=Object(p.useState)([]),f=Object(k.a)(m,2),w=f[0],$=f[1],N=Object(p.useRef)(j),z=Object(p.useRef)();N.current=j;var I=Object(p.useCallback)(Object(x.a)(S.a.mark((function e(){var t,a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(C.b)();case 4:null!==(r=e.sent)&&void 0!==r&&null!==(t=r.data)&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.summary&&(n(r.data.data.summary.sort((function(e,t){return t.timestamp-e.timestamp}))),u(r.data.msg||"")),z.current=setTimeout(I,4e3);case 7:case"end":return e.stop()}}),e)}))),[]);return Object(p.useEffect)((function(){return I(),function(){z.current&&clearTimeout(z.current)}}),[I]),{jobList:a.filter((function(e){return w.every((function(t){return e[t.key]&&e[t.key].includes(t.val)}))})),msg:d,isRefreshing:j,onSwitchChange:function(e){g(e.target.checked)},changeFilter:function(e,t){var a=w.find((function(t){return t.key===e}));a?a.val=t:w.push({key:e,val:t}),$(Object(y.a)(w))},page:i,originalJobs:a,setPage:function(e,t){return o(Object(v.a)(Object(v.a)({},i),{},Object(O.a)({},e,t)))}}}(),a=t.msg,d=t.isRefreshing,b=t.onSwitchChange,w=t.jobList,I=t.changeFilter,R=t.page,D=t.setPage;return Object($.jsxs)("div",{className:e.root,children:[Object($.jsx)(g.a,{loading:a.startsWith("Loading")}),Object($.jsxs)(f.a,{title:"JOBS",children:["Auto Refresh:",Object($.jsx)(n.a,{checked:d,onChange:b,name:"refresh",inputProps:{"aria-label":"secondary checkbox"}}),Object($.jsx)("br",{}),"Request Status: ",a]}),Object($.jsx)(f.a,{title:"Job List",children:Object($.jsxs)(r.a,{children:[Object($.jsx)(m.a,{label:"ID",onChange:function(e){return I("jobId",e)}}),Object($.jsx)(m.b,{label:"Language",onChange:function(e){return I("language",e)},options:["JAVA","PYTHON"]}),Object($.jsx)(m.a,{label:"Page Size",onChange:function(e){return D("pageSize",Math.min(Number(e),500)||10)}}),Object($.jsx)("div",{children:Object($.jsx)(u.a,{count:Math.ceil(w.length/R.pageSize),page:R.pageNo,onChange:function(e,t){return D("pageNo",t)}})}),Object($.jsxs)(c.a,{children:[Object($.jsx)(i.a,{children:Object($.jsx)(o.a,{children:z.map((function(e){return Object($.jsx)(s.a,{align:"center",children:e},e)}))})}),Object($.jsx)(l.a,{children:w.slice((R.pageNo-1)*R.pageSize,R.pageNo*R.pageSize).map((function(e){var t=e.jobId,a=void 0===t?"":t,n=e.driverIpAddress,r=e.isDead,c=e.driverPid,i=e.startTime,l=e.endTime;return Object($.jsxs)(o.a,{children:[Object($.jsx)(s.a,{align:"center",children:Object($.jsx)(j.b,{to:"/job/".concat(a),children:a})}),Object($.jsx)(s.a,{align:"center",children:n}),Object($.jsx)(s.a,{align:"center",children:c}),Object($.jsx)(s.a,{align:"center",children:r?"true":"false"}),Object($.jsx)(s.a,{align:"center",children:h()(Number(i)).format("YYYY/MM/DD HH:mm:ss")}),Object($.jsx)(s.a,{align:"center",children:l>0?h()(Number(l)).format("YYYY/MM/DD HH:mm:ss"):"-"})]},a)}))})]})]})})]})}}}]);
//# sourceMappingURL=7.5c5d370d.chunk.js.map