{"version":3,"sources":["integrationConfigListViewTests.es6.js"],"names":[],"mappings":"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","file":"integrationConfigListViewTests.js","sourcesContent":["suite('djblets/integrations/views/IntegrationConfigListView', function() {\n    const template = _.template(dedent`\n        <div class=\"djblets-c-integration-configs\">\n         <div class=\"djblets-l-config-forms-container\">\n          <table class=\"djblets-c-config-forms-list\"></table>\n         </div>\n        </div>\n    `);\n    let collection;\n    let view;\n\n    beforeEach(function() {\n        const $el = $(template()).appendTo($testsScratch);\n\n        view = new Djblets.IntegrationConfigListView({\n            el: $el,\n            configs: [\n                {\n                    'editURL' : 'configs/1/',\n                    'enabled': true,\n                    'id': 1,\n                    'integrationID': 'int1',\n                    'name': 'Config 1',\n                },\n                {\n                    'editURL' : 'configs/2/',\n                    'enabled': true,\n                    'id': 2,\n                    'integrationID': 'int2',\n                    'name': 'Config 2',\n                },\n                {\n                    'editURL' : 'configs/3/',\n                    'enabled': false,\n                    'id': 3,\n                    'integrationID': 'int3',\n                    'name': 'Config 3',\n                },\n                {\n                    'editURL' : 'configs/4/',\n                    'enabled': true,\n                    'id': 4,\n                    'integrationID': 'int1',\n                    'name': 'Config 4',\n                },\n            ],\n            integrationIDs: ['int1', 'int2', 'int3'],\n            integrationsMap: {\n                int1: {\n                    'addURL': 'int1/add/',\n                    'description': 'Int1 Description',\n                    'iconSrc': 'data:test,int1',\n                    'iconSrcSet': 'data:test,int1 1x, data:test,int1@2x 2x',\n                    'id': 'int1',\n                    'name': 'Int1',\n                },\n                int2: {\n                    'addURL': 'int2/add/',\n                    'description': 'Int2 Description',\n                    'iconSrc': 'data:test,int2',\n                    'iconSrcSet': 'data:test,int2 1x, data:test,int2@2x 2x',\n                    'id': 'int2',\n                    'name': 'Int2',\n                },\n                int3: {\n                    'addURL': 'int3/add/',\n                    'description': 'Int3 Description',\n                    'iconSrc': 'data:test,int3',\n                    'iconSrcSet': 'data:test,int3 1x, data:test,int3@2x 2x',\n                    'id': 'int3',\n                    'name': 'Int3',\n                },\n            },\n        });\n        view.render();\n\n        collection = view.list.collection;\n    });\n\n    describe('Configurations', function() {\n        let $row1;\n        let $row2;\n        let $row3;\n        let $row4;\n\n        beforeEach(function() {\n            const $rows = view.listView.$('tr');\n            expect($rows.length).toBe(4);\n\n            $row1 = $rows.eq(0);\n            $row2 = $rows.eq(1);\n            $row3 = $rows.eq(2);\n            $row4 = $rows.eq(3);\n        });\n\n        describe('Rendering', function() {\n            it('Icon', function() {\n                const $icon1 =\n                    $row1.find('.djblets-c-integration-config__name img');\n                const $icon2 =\n                    $row2.find('.djblets-c-integration-config__name img');\n                const $icon3 =\n                    $row3.find('.djblets-c-integration-config__name img');\n                const $icon4 =\n                    $row4.find('.djblets-c-integration-config__name img');\n\n                expect($icon1.attr('src')).toBe('data:test,int1');\n                expect($icon2.attr('src')).toBe('data:test,int2');\n                expect($icon3.attr('src')).toBe('data:test,int3');\n                expect($icon4.attr('src')).toBe('data:test,int1');\n\n                expect($icon1.attr('srcset'))\n                    .toBe('data:test,int1 1x, data:test,int1@2x 2x');\n                expect($icon2.attr('srcset'))\n                    .toBe('data:test,int2 1x, data:test,int2@2x 2x');\n                expect($icon3.attr('srcset'))\n                    .toBe('data:test,int3 1x, data:test,int3@2x 2x');\n                expect($icon4.attr('srcset'))\n                    .toBe('data:test,int1 1x, data:test,int1@2x 2x');\n            });\n\n            it('Name', function() {\n                const $name1 =\n                    $row1.find('.djblets-c-integration-config__name a');\n                const $name2 =\n                    $row2.find('.djblets-c-integration-config__name a');\n                const $name3 =\n                    $row3.find('.djblets-c-integration-config__name a');\n                const $name4 =\n                    $row4.find('.djblets-c-integration-config__name a');\n\n                expect($name1.text()).toBe('Config 1');\n                expect($name2.text()).toBe('Config 2');\n                expect($name3.text()).toBe('Config 3');\n                expect($name4.text()).toBe('Config 4');\n\n                expect($name1.attr('href')).toBe('configs/1/');\n                expect($name2.attr('href')).toBe('configs/2/');\n                expect($name3.attr('href')).toBe('configs/3/');\n                expect($name4.attr('href')).toBe('configs/4/');\n            });\n\n            it('Integration name', function() {\n                const $intName1 = $row1.find(\n                    '.djblets-c-integration-config__integration-name');\n                const $intName2 = $row2.find(\n                    '.djblets-c-integration-config__integration-name');\n                const $intName3 = $row3.find(\n                    '.djblets-c-integration-config__integration-name');\n                const $intName4 = $row4.find(\n                    '.djblets-c-integration-config__integration-name');\n\n                expect($intName1.text().trim()).toBe('Int1');\n                expect($intName2.text().trim()).toBe('Int2');\n                expect($intName3.text().trim()).toBe('Int3');\n                expect($intName4.text().trim()).toBe('Int1');\n            });\n\n            it('Status', function() {\n                expect($row1.hasClass('-is-enabled')).toBe(true);\n                expect($row2.hasClass('-is-enabled')).toBe(true);\n                expect($row3.hasClass('-is-enabled')).toBe(false);\n                expect($row4.hasClass('-is-enabled')).toBe(true);\n\n                expect($row1.hasClass('-is-disabled')).toBe(false);\n                expect($row2.hasClass('-is-disabled')).toBe(false);\n                expect($row3.hasClass('-is-disabled')).toBe(true);\n                expect($row4.hasClass('-is-disabled')).toBe(false);\n\n                expect(\n                    $row1.find('.djblets-c-config-forms-list__item-state')\n                    .text()\n                ).toBe('Enabled');\n\n                expect(\n                    $row2.find('.djblets-c-config-forms-list__item-state')\n                    .text()\n                ).toBe('Enabled');\n\n                expect(\n                    $row3.find('.djblets-c-config-forms-list__item-state')\n                    .text()\n                ).toBe('Disabled');\n\n                expect(\n                    $row4.find('.djblets-c-config-forms-list__item-state')\n                    .text()\n                ).toBe('Enabled');\n            });\n        });\n\n        describe('Actions', function() {\n            it('Delete', function() {\n                const config = collection.at(0);\n\n                spyOn(config, 'destroy').and.callThrough();\n                spyOn(config, 'sync');\n\n                spyOn($.fn, 'modalBox').and.callFake(\n                    options => options.buttons[1].click());\n\n                $row1.find('.config-forms-list-action-delete').click();\n\n                expect($.fn.modalBox).toHaveBeenCalled();\n                expect(config.destroy).toHaveBeenCalled();\n\n                expect(collection.length).toBe(3);\n                expect(view.listView.$('tr').length).toBe(3);\n            });\n        });\n    });\n});\n"]}