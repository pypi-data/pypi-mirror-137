{"version":3,"sources":["urls.es6.js"],"names":[],"mappings":"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","file":"urls.js","sourcesContent":["/**\n * Build and return a URL out of different components.\n *\n * This will construct a URL based on a base URL (which may be an absolute\n * URL, a relative path, or an empty string), optional query string data (as\n * a string, a dictionary, or array), and an optional anchor name.\n *\n * Args:\n *     options (object):\n *         The options used to construct the URL.\n *\n * Option Args:\n *     anchor (unicode, optional):\n *         An anchor to append to the URL. This may include the leading ``#``,\n *         but it's optional.\n *\n *     baseURL (string, optional):\n *         The base URL to build onto, if any. If not provided, an empty\n *         string will be used.\n *\n *     queryData (*, optional):\n *         Data for the query string. This can be a string, an object, or\n *         an array of dictionaries containing ``name`` and ``value`` keys.\n *         See :js:func:`jQuery.param` for information on what's allowed here.\n *\n *         If using an object of keys and values, the sort order is not\n *         guaranteed. It will be up to the JavaScript engine. Provide a\n *         string or array to guarantee order.\n *\n *         If using a string, and the string begins with a ``?``, it will be\n *         stripped away.\n *\n * Returns:\n *     string:\n *     The resulting URL.\n */\nDjblets.buildURL = function(options={}) {\n    let url = options.baseURL || '';\n\n    /* Build the query string, if any. */\n    const queryData = options.queryData;\n\n    if (queryData) {\n        let queryString;\n\n        if (typeof queryData === 'string') {\n            queryString = queryData;\n\n            if (queryString.indexOf('?') === 0) {\n                queryString = queryString.substr(1);\n            }\n        } else {\n            queryString = $.param(queryData);\n        }\n\n        if (queryString) {\n            url += `?${queryString}`;\n        }\n    }\n\n    /* Append an anchor, if any. */\n    const anchor = options.anchor;\n\n    if (anchor) {\n        if (anchor.indexOf('#') === 0) {\n            url += anchor;\n        } else {\n            url += `#${anchor}`;\n        }\n    }\n\n    return url;\n};\n\n\n/**\n * Parse a query string for key/value pairs.\n *\n * This takes a query string in the provided URL and parses it for standard\n * key/value pairs, returning an object representing those keys and values.\n * It can handle keys without values and optionally store multiple values\n * listed for the same key.\n *\n * Args:\n *     url (string):\n *         The URL containing a query string to parse.\n *\n *     options (object, optional):\n *         Options for controlling the parsing.\n *\n * Option Args:\n *     allowMultiValue (boolean):\n *         Whether to store multiple values for the same key, if found in\n *         the query string. The value for such a key will be an array of all\n *         values. If ``false`` (the default), only last value for a key will\n *         be stored.\n *\n * Returns:\n *     object:\n *     The resulting keys and values representing the query string.\n *\n *     If there was a query string item that did not have a value (in other\n *     words, no ``=`` was present), then its value will be ``null``.\n *\n *     If ``options.allowMultiValue`` is ``true``, and a key was used more\n *     than once, then its value will be a list of all values in the query\n *     string for that key.\n */\nDjblets.parseQueryString = function(url, options={}) {\n    const allowMultiValue = options.allowMultiValue;\n\n    let j = url.indexOf('?');\n    let queryString;\n\n    if (j === -1) {\n        /* Assume the whole thing is a query string. */\n        queryString = url;\n    } else {\n        queryString = url.substr(j + 1);\n    }\n\n    const query = {};\n\n    if (queryString.length === 0) {\n        return query;\n    }\n\n    const queryParams = queryString.split('&');\n\n    for (let i = 0; i < queryParams.length; i++) {\n        const queryParam = queryParams[i];\n        let key;\n        let value;\n\n        j = queryParam.indexOf('=');\n\n        if (j === -1) {\n            key = decodeURIComponent(queryParam);\n            value = null;\n        } else {\n            key = decodeURIComponent(queryParam.substr(0, j));\n            value = decodeURIComponent(queryParam.substr(j + 1));\n        }\n\n        if (allowMultiValue && query.hasOwnProperty(key)) {\n            if (_.isArray(query[key])) {\n                query[key].push(value);\n            } else {\n                query[key] = [query[key], value];\n            }\n        } else {\n            query[key] = value;\n        }\n    }\n\n    return query;\n};\n"]}