{"version":3,"sources":["privacyConsentFieldView.es6.js"],"names":[],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,CAAC,KAAR,CAAc,uBAAd,GAAwC,QAAQ,CAAC,IAAT,CAAc,MAAd,CAAqB;AACzD,EAAA,MAAM,EAAE;AACJ,oBAAgB;AADZ,GADiD;;AAKzD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI,EAAA,UAzByD,sBAyB9C,OAzB8C,EAyBrC;AAChB,SAAK,OAAL,GAAe,OAAf;AAEA,QAAM,QAAQ,GAAG,KAAK,CAAL,CAAO,gCAAP,CAAjB;AACA,QAAM,YAAY,GACd,QAAQ,CAAC,IAAT,CAAc,qCAAd,CADJ;AAEA,QAAM,YAAY,GACd,QAAQ,CAAC,IAAT,CAAc,qCAAd,CADJ;AAGA,SAAK,YAAL,GAAoB,YAAY,CAAC,QAAb,CAAsB,OAAtB,CAApB;AACA,SAAK,YAAL,GAAoB,YAAY,CAAC,QAAb,CAAsB,OAAtB,CAApB;AACA,SAAK,YAAL,GAAoB,YAAY,CAAC,QAAb,CAAsB,OAAtB,CAApB;AACA,SAAK,YAAL,GAAoB,YAAY,CAAC,QAAb,CAAsB,OAAtB,CAApB;AACH,GAtCwD;;AAwCzD;AACJ;AACA;AACA;AACA;AACA;AACA;AACI,EAAA,MA/CyD,oBA+ChD;AACL,SAAK,iBAAL;;AAEA,WAAO,IAAP;AACH,GAnDwD;;AAqDzD;AACJ;AACA;AACA;AACA;AACA;AACI,EAAA,iBA3DyD,+BA2DrC;AAChB,QAAM,OAAO,GAAG,KAAK,YAAL,CAAkB,EAAlB,CAAqB,UAArB,CAAhB;;AACA,QAAM,OAAO,GAAG,KAAK,YAAL,CAAkB,EAAlB,CAAqB,UAArB,CAAhB;;AAEA,SAAK,GAAL,CAAS,WAAT,CAAqB,6BAArB,EAAoD,OAApD;AACA,SAAK,GAAL,CAAS,WAAT,CAAqB,6BAArB,EAAoD,OAApD;;AAEA,SAAK,YAAL,CAAkB,IAAlB,CAAuB,OAAO,GACL,KAAK,OAAL,CAAa,WADR,GAEL,KAAK,OAAL,CAAa,SAFtC;;AAGA,SAAK,YAAL,CAAkB,IAAlB,CAAuB,OAAO,GACL,KAAK,OAAL,CAAa,WADR,GAEL,KAAK,OAAL,CAAa,SAFtC;AAGH;AAxEwD,CAArB,CAAxC","file":"privacyConsentFieldView.js","sourcesContent":["/**\n * Manages the display of a consent field.\n *\n * This helps style consent fields to better represent the current choice\n * made, altering labels and colors. It provides no functionality beyond\n * enhancing the look of the field beyond what can be done in CSS.\n */\nDjblets.Forms.PrivacyConsentFieldView = Backbone.View.extend({\n    events: {\n        'change input': '_onConsentChanged',\n    },\n\n    /**\n     * Initialize the view.\n     *\n     * Args:\n     *     options (object):\n     *         Options for the view.\n     *\n     * Option Args:\n     *     allowText (string):\n     *         Text to use for the allow action.\n     *\n     *     allowedText (string):\n     *         Text to use when the allow action is selected.\n     *\n     *     blockText (string):\n     *         Text to use for the block action.\n     *\n     *     blockedText (string):\n     *         Text to use when the block action is selected.\n     */\n    initialize(options) {\n        this.options = options;\n\n        const $choices = this.$('.privacy-consent-field-choices');\n        const $allowChoice =\n            $choices.find('.privacy-consent-field-choice-allow');\n        const $blockChoice =\n            $choices.find('.privacy-consent-field-choice-block');\n\n        this._$allowInput = $allowChoice.children('input');\n        this._$allowLabel = $allowChoice.children('label');\n        this._$blockInput = $blockChoice.children('input');\n        this._$blockLabel = $blockChoice.children('label');\n    },\n\n    /**\n     * Render the view.\n     *\n     * Returns:\n     *     Djblets.Forms.PrivacyConsentFieldView:\n     *     This view, for chaining.\n     */\n    render() {\n        this._onConsentChanged();\n\n        return this;\n    },\n\n    /**\n     * Handler for when the consent choice has changed.\n     *\n     * This will toggle classes on the field's element to reflect the\n     * current consent choice, and update the labels.\n     */\n    _onConsentChanged() {\n        const allowed = this._$allowInput.is(':checked');\n        const blocked = this._$blockInput.is(':checked');\n\n        this.$el.toggleClass('privacy-consent-field-allow', allowed);\n        this.$el.toggleClass('privacy-consent-field-block', blocked);\n\n        this._$allowLabel.text(allowed\n                               ? this.options.allowedText\n                               : this.options.allowText);\n        this._$blockLabel.text(blocked\n                               ? this.options.blockedText\n                               : this.options.blockText);\n    },\n});\n"]}